<!doctype html>
<html lang="pt-BR">
<head>
  <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T78CTZLN');</script>
<!-- End Google Tag Manager -->
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Portal Encantado — Acesso</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Inter:wght@300;600&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1: #031014;
    --bg2: #06302a;
    --accent: #ffd77a;
    --green: #2bd08a;
    --muted: rgba(255,255,255,0.8);
    --glass: rgba(255,255,255,0.03);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial,sans-serif;background:linear-gradient(180deg,var(--bg1),var(--bg2));color:#fff}
  .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px}
  .card{width:100%;max-width:420px;background:linear-gradient(180deg,rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:16px;padding:28px;box-shadow:0 20px 50px rgba(0,0,0,0.6);border:1px solid rgba(255,255,255,0.03);position:relative;overflow:hidden}
  .logo{display:flex;gap:12px;align-items:center;margin-bottom:18px}
  .logo .mark{width:52px;height:52px;border-radius:12px;background:radial-gradient(circle at 30% 30%, #2fe0a0, #0f7a5a);display:flex;align-items:center;justify-content:center;font-weight:700;color:#042822;box-shadow:0 6px 18px rgba(0,0,0,0.45)}
  .logo h1{margin:0;font-family:'DM Serif Display',serif;font-size:1.15rem;color:var(--accent)}
  .logo p{margin:0;font-size:0.78rem;color:var(--muted)}
  .instructions{color:var(--muted);font-size:0.95rem;margin-bottom:16px;line-height:1.4}
  .field{display:flex;gap:8px;align-items:center;margin-bottom:8px}
  input[type="password"]{flex:1;padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);background:var(--glass);color:var(--muted);outline:none;font-size:1rem}
  button.primary{background:linear-gradient(90deg,var(--green),#24b37a);color:#022218;border:none;padding:12px 14px;border-radius:12px;font-weight:700;cursor:pointer}
  .hint{font-size:0.86rem;color:rgba(255,255,255,0.7);margin-top:8px}
  .error{color:#ff9999;margin-top:10px;font-weight:600}
  .success{color:#bff0d9;margin-top:10px;font-weight:600}
  .footer{margin-top:18px;font-size:0.84rem;color:var(--muted);display:flex;justify-content:space-between;align-items:center}
  .small{font-size:0.78rem;color:rgba(255,255,255,0.65)}
  .glow{position:absolute;right:-120px;top:-80px;width:320px;height:320px;border-radius:50%;background:radial-gradient(circle at 30% 30%, rgba(255,200,100,0.12), transparent 30%);filter:blur(28px);pointer-events:none}
  @media(max-width:420px){.card{padding:18px}}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main" aria-labelledby="title">
      <div class="glow" aria-hidden="true"></div>
      <div class="logo">
        <div class="mark" aria-hidden="true">ELF</div>
        <div>
          <h1 id="title">Portal Encantado</h1>
          <p>Digite a senha para prosseguir à viagem</p>
        </div>
      </div>

      <div class="instructions" id="instr">
        Para proteger o conteúdo pré-lançamento, pedimos que insira a senha secreta. Se você fez parte da lista de espera, a senha foi enviada por mensagem.
      </div>

      <div class="field">
        <input id="pw" type="password" placeholder="Senha secreta" aria-label="Senha do portal" autocomplete="off" />
        <button id="btn" class="primary">Abrir</button>
      </div>

      <div id="msg" class="hint small">Você tem <span id="tries">5</span> tentativas.</div>
      <div id="feedback" role="status" aria-live="polite"></div>

      <div class="footer">
        <div class="small">Versão mística • 1.0</div>
        <div class="small">Contato: <a href="https://instagram.com" target="_blank" style="color:var(--accent);text-decoration:none">@mestrellfo</a></div>
      </div>
    </div>
  </div>

<script>
/*
  Simple password gate (client-side)
  - Sets a SHA-256 hash (hex) of the allowed password
  - Compares hashed input -> redirects to TARGET_URL if matches
  - Basic attempt limit + cooldown for UX
  - NOTE: client-side only (not secure for secret data)
*/

// ===== CONFIGURE THESE VALUES =====
// Redirecionar quando senha correta:
const TARGET_URL = 'https://ellfo.com.br/trilha.html'; // ajustar conforme necessidade

// Senha em texto (opcional, para gerar hash aqui localmente).
// ATENÇÃO: se você deixar isso, qualquer um que abra o HTML verá a senha.
// Recomendado: apagar SENHA_PLAINTEXT e deixar somente SENHA_HASH.
const SENHA_PLAINTEXT = 'teste'; // ex: 'minhaSenhaSecreta' -> recomendado deixar vazio

// Hash SHA-256 (hex) da senha correta. Se você não souber, coloque a SENHA_PLAINTEXT e abra a página para
// o navegador gerar o hash (console). Depois substitua e remova o plain text.
let SENHA_HASH = ''; // valor placeholder

// Tentativas / cooldown
const MAX_TRIES = 5;
const COOLDOWN_MS = 30_000; // 30 segundos se ultrapassar tentativas

// ===== logic =====
const pwInput = document.getElementById('pw');
const btn = document.getElementById('btn');
const feedback = document.getElementById('feedback');
const triesEl = document.getElementById('tries');

let triesLeft = MAX_TRIES;
triesEl.textContent = triesLeft;

// helper: hex from buffer
function buf2hex(buffer){
  return Array.prototype.map.call(new Uint8Array(buffer), x => ('00' + x.toString(16)).slice(-2)).join('');
}

// compute sha-256
async function sha256(str){
  const enc = new TextEncoder();
  const data = enc.encode(str);
  const hash = await crypto.subtle.digest('SHA-256', data);
  return buf2hex(hash);
}

// if plain text provided, generate and show hash in console for convenience
(async function initHash(){
  if(SENHA_PLAINTEXT && SENHA_PLAINTEXT.length>0){
    const h = await sha256(SENHA_PLAINTEXT);
    console.log('Generated hash (use this in SENHA_HASH and clear SENHA_PLAINTEXT):', h);
    // use it temporarily:
    SENHA_HASH = h;
  }
})();

function showMessage(text, cls='error'){
  feedback.textContent = text;
  feedback.className = cls;
}

// disable UI for cooldown
function lockUI(ms){
  btn.disabled = true;
  pwInput.disabled = true;
  showMessage('Muitos erros. Aguardando ' + (ms/1000) + 's...', 'error');
  setTimeout(()=>{
    btn.disabled = false;
    pwInput.disabled = false;
    triesLeft = MAX_TRIES;
    triesEl.textContent = triesLeft;
    showMessage('Tente novamente.', 'hint');
  }, ms);
}

btn.addEventListener('click', async ()=>{
  const val = (pwInput.value || '').trim();
  if(!val){ showMessage('Digite a senha.', 'error'); return; }

  // hash and compare
  try{
    const h = await sha256(val);
    if(h === SENHA_HASH){
      showMessage('Senha correta! Redirecionando...', 'success');
      // small delay for UX
      setTimeout(()=> location.href = TARGET_URL, 800);
    } else {
      triesLeft--;
      triesEl.textContent = triesLeft;
      if(triesLeft <= 0){
        lockUI(COOLDOWN_MS);
      } else {
        showMessage('Senha incorreta. Tente novamente.', 'error');
      }
    }
  } catch(err){
    console.error(err);
    showMessage('Erro no processamento. Recarregue a página.', 'error');
  }
});

// allow Enter key
pwInput.addEventListener('keydown', (e)=>{
  if(e.key === 'Enter') btn.click();
});

</script>
</body>
</html>
